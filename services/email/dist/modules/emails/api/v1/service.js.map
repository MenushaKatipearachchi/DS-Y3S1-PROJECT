{
  "version": 3,
  "sources": ["../../../../../src/modules/emails/api/v1/service.js"],
  "sourcesContent": ["import fs from \"fs\";\r\nimport createError from \"http-errors\";\r\nimport { traced } from \"@sliit-foss/functions\";\r\nimport { sendMail } from \"../../../../services\";\r\n\r\nexport const serviceSendEmail = async ({\r\n  template,\r\n  data,\r\n  options: { to, cc, bcc, subject, attachments },\r\n}) => {\r\n  let html;\r\n  try {\r\n    html = fs.readFileSync(`${__dirname}/templates/${template}.html`, \"utf8\");\r\n  } catch (error) {\r\n    throw createError(400, \"Template not found\", { template });\r\n  }\r\n  const result = await traced(sendMail)({\r\n    to,\r\n    cc,\r\n    bcc,\r\n    templateHTML: html,\r\n    replacements: data,\r\n    subject,\r\n    attachments,\r\n  });\r\n  if (result) return;\r\n  throw createError(424, \"Failed to send email\");\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAe;AACf,yBAAwB;AACxB,uBAAuB;AACvB,sBAAyB;AAElB,MAAM,mBAAmB,8BAAO;AAAA,EACrC;AAAA,EACA;AAAA,EACA,SAAS,EAAE,IAAI,IAAI,KAAK,SAAS,YAAY;AAC/C,MAAM;AACJ,MAAI;AACJ,MAAI;AACF,WAAO,UAAAA,QAAG,aAAa,GAAG,uBAAuB,iBAAiB,MAAM;AAAA,EAC1E,SAAS,OAAP;AACA,cAAM,mBAAAC,SAAY,KAAK,sBAAsB,EAAE,SAAS,CAAC;AAAA,EAC3D;AACA,QAAM,SAAS,UAAM,yBAAO,wBAAQ,EAAE;AAAA,IACpC;AAAA,IACA;AAAA,IACA;AAAA,IACA,cAAc;AAAA,IACd,cAAc;AAAA,IACd;AAAA,IACA;AAAA,EACF,CAAC;AACD,MAAI;AAAQ;AACZ,YAAM,mBAAAA,SAAY,KAAK,sBAAsB;AAC/C,GAtBgC;",
  "names": ["fs", "createError"]
}
