{
  "version": 3,
  "sources": ["../../../../src/modules/orchestrator/api/controller.js"],
  "sourcesContent": ["import express from \"express\";\nimport serviceConnector from \"@sliit-foss/service-connector\";\nimport { tracedAsyncHandler } from \"@sliit-foss/functions\";\nimport { serviceHosts } from \"../constants\";\n//  eslint-disable-next-line no-unused-vars\nimport { permittedRoles } from \"../../../middleware\";\nimport { routeGuards } from \"./middleware\";\n\nconst orchestrator = express.Router();\n\nconst connector = serviceConnector({ service: \"Proxy\" });\n\norchestrator.all(\n  \"/:api_version/:module*\",\n  tracedAsyncHandler(function attachMiddleware(req, res, next) {\n    switch (req.params.module) {\n      case \"users\":\n        return routeGuards[req.params.module](req, res, next);\n      case \"emails\":\n        return permittedRoles([\"admin\", \"seller\"])(req, res, next);\n      default:\n        return;\n    }\n  })\n);\n\norchestrator.all(\n  \"/:api_version/:module*\",\n  tracedAsyncHandler(function redirect(req, res) {\n    return connector.proxy(serviceHosts[req.params.module], req, res);\n  })\n);\n\nexport default orchestrator;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAoB;AACpB,+BAA6B;AAC7B,uBAAmC;AACnC,uBAA6B;AAE7B,wBAA+B;AAC/B,IAAAA,qBAA4B;AAE5B,MAAM,eAAe,eAAAC,QAAQ,OAAO;AAEpC,MAAM,gBAAY,yBAAAC,SAAiB,EAAE,SAAS,QAAQ,CAAC;AAEvD,aAAa;AAAA,EACX;AAAA,MACA,qCAAmB,gCAAS,iBAAiB,KAAK,KAAK,MAAM;AAC3D,YAAQ,IAAI,OAAO,QAAQ;AAAA,MACzB,KAAK;AACH,eAAO,+BAAY,IAAI,OAAO,MAAM,EAAE,KAAK,KAAK,IAAI;AAAA,MACtD,KAAK;AACH,mBAAO,kCAAe,CAAC,SAAS,QAAQ,CAAC,EAAE,KAAK,KAAK,IAAI;AAAA,MAC3D;AACE;AAAA,IACJ;AAAA,EACF,GATmB,mBASlB;AACH;AAEA,aAAa;AAAA,EACX;AAAA,MACA,qCAAmB,gCAAS,SAAS,KAAK,KAAK;AAC7C,WAAO,UAAU,MAAM,8BAAa,IAAI,OAAO,MAAM,GAAG,KAAK,GAAG;AAAA,EAClE,GAFmB,WAElB;AACH;AAEA,IAAO,qBAAQ;",
  "names": ["import_middleware", "express", "serviceConnector"]
}
