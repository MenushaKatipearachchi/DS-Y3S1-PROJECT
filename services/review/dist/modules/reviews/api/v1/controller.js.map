{
  "version": 3,
  "sources": ["../../../../../src/modules/reviews/api/v1/controller.js"],
  "sourcesContent": ["import express from \"express\";\r\nimport mongoose from \"mongoose\";\r\n// import { Joi } from \"celebrate\";\r\nimport { celebrate, Segments } from \"celebrate\";\r\nimport { default as filterQuery } from \"@sliit-foss/mongoose-filter-query\";\r\nimport { asyncHandler } from \"@sliit-foss/functions\";\r\nimport { objectIdSchema } from \"@app/constants\";\r\nimport { ratingParamSchema } from \"@app/constants\";\r\nimport { toSuccess } from \"@app/middleware\";\r\nimport {\r\n  serviceCreateReview,\r\n  serviceGetReviews,\r\n  serviceGetReviewById,\r\n  serviceGetReviewByRating,\r\n  serviceUpdateReviewById,\r\n  serviceDeleteReviewById,\r\n} from \"./service\";\r\n\r\nimport { createReviewSchema, updateReviewSchema } from \"./schema\";\r\n\r\nconst review = express.Router();\r\n\r\nreview.post(\r\n  \"/\",\r\n  celebrate({ [Segments.BODY]: createReviewSchema }),\r\n  asyncHandler(async function controllerCreateReview(req, res) {\r\n    const data = await serviceCreateReview(req.body);\r\n    return toSuccess({ res, data, message: \"Review created successfully!\" });\r\n  })\r\n);\r\n\r\n// review.get(\r\n//   \"/\",\r\n//   filterQuery,\r\n//   asyncHandler(async function controllerGetReviews(req, res) {\r\n//     const data = await serviceGetReviews(\r\n//       req.query.filter,\r\n//       req.query.sort,\r\n//       req.query.page,\r\n//       req.query.limit\r\n//     );\r\n//     return toSuccess({ res, data, message: \"Reviews fetched successfully!\" });\r\n//   })\r\n// );\r\n\r\nreview.get(\r\n  \"/\",\r\n  filterQuery,\r\n  asyncHandler(async function controllerGetReviews(req, res) {\r\n    const { filter, sort, page, limit } = req.query;\r\n    const data = await serviceGetReviews(filter, sort, page, limit);\r\n    return toSuccess({ res, data, message: \"Reviews fetched successfully!\" });\r\n  })\r\n);\r\n\r\nreview.get(\r\n  \"/:id\",\r\n  celebrate({ [Segments.PARAMS]: objectIdSchema() }),\r\n  asyncHandler(async function controllerGetReviewById(req, res) {\r\n    const data = await serviceGetReviewById(req.params.id);\r\n    return toSuccess({ res, data, message: \"Review fetched successfully!\" });\r\n  })\r\n);\r\n\r\n// get review by rating\r\nreview.get(\r\n  \"/rating/:rating\",\r\n  celebrate({ [Segments.PARAMS]: ratingParamSchema() }),\r\n  asyncHandler(async function controllerGetReviewByRating(req, res) {\r\n    const data = await serviceGetReviewByRating(req.params.rating);\r\n    return toSuccess({ res, data, message: \"Reviews fetched successfully!\" });\r\n  })\r\n);\r\n\r\nreview.patch(\r\n  \"/:id\",\r\n  celebrate({\r\n    [Segments.PARAMS]: objectIdSchema(),\r\n    [Segments.BODY]: updateReviewSchema,\r\n  }),\r\n  asyncHandler(async function controllerUpdateReviewById(req, res) {\r\n    const data = await serviceUpdateReviewById(req.params.id, req.body);\r\n    return toSuccess({ res, data, message: \"Review updated successfully!\" });\r\n  })\r\n);\r\n\r\nreview.delete(\r\n  \"/:id\",\r\n  celebrate({ [Segments.PARAMS]: objectIdSchema() }),\r\n  asyncHandler(async function controllerDeleteReviewById(req, res) {\r\n    const data = await serviceDeleteReviewById(req.params.id);\r\n    return toSuccess({ res, data, message: \"Review deleted successfully!\" });\r\n  })\r\n);\r\n\r\nexport default review;\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAoB;AACpB,sBAAqB;AAErB,uBAAoC;AACpC,mCAAuC;AACvC,uBAA6B;AAC7B,uBAA+B;AAC/B,IAAAA,oBAAkC;AAClC,wBAA0B;AAC1B,qBAOO;AAEP,oBAAuD;AAEvD,MAAM,SAAS,eAAAC,QAAQ,OAAO;AAE9B,OAAO;AAAA,EACL;AAAA,MACA,4BAAU,EAAE,CAAC,0BAAS,IAAI,GAAG,iCAAmB,CAAC;AAAA,MACjD,+BAAa,sCAAe,uBAAuB,KAAK,KAAK;AAC3D,UAAM,OAAO,UAAM,oCAAoB,IAAI,IAAI;AAC/C,eAAO,6BAAU,EAAE,KAAK,MAAM,SAAS,+BAA+B,CAAC;AAAA,EACzE,GAHa,yBAGZ;AACH;AAgBA,OAAO;AAAA,EACL;AAAA,EACA,6BAAAC;AAAA,MACA,+BAAa,sCAAe,qBAAqB,KAAK,KAAK;AACzD,UAAM,EAAE,QAAQ,MAAM,MAAM,MAAM,IAAI,IAAI;AAC1C,UAAM,OAAO,UAAM,kCAAkB,QAAQ,MAAM,MAAM,KAAK;AAC9D,eAAO,6BAAU,EAAE,KAAK,MAAM,SAAS,gCAAgC,CAAC;AAAA,EAC1E,GAJa,uBAIZ;AACH;AAEA,OAAO;AAAA,EACL;AAAA,MACA,4BAAU,EAAE,CAAC,0BAAS,MAAM,OAAG,iCAAe,EAAE,CAAC;AAAA,MACjD,+BAAa,sCAAe,wBAAwB,KAAK,KAAK;AAC5D,UAAM,OAAO,UAAM,qCAAqB,IAAI,OAAO,EAAE;AACrD,eAAO,6BAAU,EAAE,KAAK,MAAM,SAAS,+BAA+B,CAAC;AAAA,EACzE,GAHa,0BAGZ;AACH;AAGA,OAAO;AAAA,EACL;AAAA,MACA,4BAAU,EAAE,CAAC,0BAAS,MAAM,OAAG,qCAAkB,EAAE,CAAC;AAAA,MACpD,+BAAa,sCAAe,4BAA4B,KAAK,KAAK;AAChE,UAAM,OAAO,UAAM,yCAAyB,IAAI,OAAO,MAAM;AAC7D,eAAO,6BAAU,EAAE,KAAK,MAAM,SAAS,gCAAgC,CAAC;AAAA,EAC1E,GAHa,8BAGZ;AACH;AAEA,OAAO;AAAA,EACL;AAAA,MACA,4BAAU;AAAA,IACR,CAAC,0BAAS,MAAM,OAAG,iCAAe;AAAA,IAClC,CAAC,0BAAS,IAAI,GAAG;AAAA,EACnB,CAAC;AAAA,MACD,+BAAa,sCAAe,2BAA2B,KAAK,KAAK;AAC/D,UAAM,OAAO,UAAM,wCAAwB,IAAI,OAAO,IAAI,IAAI,IAAI;AAClE,eAAO,6BAAU,EAAE,KAAK,MAAM,SAAS,+BAA+B,CAAC;AAAA,EACzE,GAHa,6BAGZ;AACH;AAEA,OAAO;AAAA,EACL;AAAA,MACA,4BAAU,EAAE,CAAC,0BAAS,MAAM,OAAG,iCAAe,EAAE,CAAC;AAAA,MACjD,+BAAa,sCAAe,2BAA2B,KAAK,KAAK;AAC/D,UAAM,OAAO,UAAM,wCAAwB,IAAI,OAAO,EAAE;AACxD,eAAO,6BAAU,EAAE,KAAK,MAAM,SAAS,+BAA+B,CAAC;AAAA,EACzE,GAHa,6BAGZ;AACH;AAEA,IAAO,qBAAQ;",
  "names": ["import_constants", "express", "filterQuery"]
}
